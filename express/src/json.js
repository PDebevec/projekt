function toJson(arr2d) {
    arr2 = []
    for (var i = 0; i < 28; i++) {
        let arr = []
        for(var j = 0; j < 28; j++){
            arr.push(map(arr2d[i][j].c, 0, 255, 0, 255, true)/255)
        }
        arr2.push(arr)
    }
    var jsonstring = JSON.stringify(arr2)
    /*$.ajax({
        type:"post",
        url:"/",
        dataType: 'json',
        data: JSON.stringify(arr2),
            contentType: 'application/json',
            success: (data) => {
               alert("success");
               alert(data);
        }
    })*/
    console.log(jsonstring)
    return jsonstring
}

function getNumber(arr2d){
    reqnumber = document.getElementById('reqnumber')
    //number = null;
    number = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.35294117647058826,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.5882352941176471,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.5882352941176471,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,0.5882352941176471,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0.35294117647058826,1,1,0,0,0,0,0,0,0,0,0,0,0.8235294117647058,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0.35294117647058826,1,1,0,0,0,0,0,0,0,0,0.47058823529411764,1,1,1,0.8235294117647058,0,0,0,0,0,0,0],[0,0,0,0,0,0.11764705882352941,1,1,0,0,0,0,0,0,0.5882352941176471,1,1,1,1,0.7058823529411765,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.11764705882352941,1,1,0,0,0,0.35294117647058826,0.7958031777900899,1,1,1,1,1,0.47058823529411764,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.11764705882352941,1,1,0,0.35294117647058826,0.8625700802941884,1,1,1,1,0.9894834174865007,0.35294117647058826,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.11764705882352941,1,1,0.5882352941176471,1,1,1,0.8707701397853626,0.47058823529411764,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0.11764705882352941,1,1,1,1,1,0.47058823529411764,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0.47058823529411764,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
    
    /*$.ajax({
        type:"get",
        url:"/",
        data: reqnumbertoString(),
        sucess: (data) => {
            number = JSON.parse(data)
        },
        error: (xhr, thrownError) => {
            alert(xhr.status)
            alert(thrownError)
        }
    })*/
    for (var i = 0; i < 28; i++) {
        for(var j = 0; j < 28; j++){
            arr2d[i][j].c = (map(number[i][j], 0, 1, 0, 255, true))
            arr2d[i][j].rect_draw()
        }
    }
}